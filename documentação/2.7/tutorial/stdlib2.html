

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>11. Um breve passeio pela biblioteca padrão — parte II &mdash; Python v2.7.2 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.7.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Python v2.7.2 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Python v2.7.2 documentation" href="../index.html" />
    <link rel="up" title="O tutorial de Python" href="index.html" />
    <link rel="next" title="12. E agora?" href="whatnow.html" />
    <link rel="prev" title="10. Um breve passeio pela biblioteca padrão" href="stdlib.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    <script type="text/javascript" src="../_static/copybutton.js"></script>
 

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="whatnow.html" title="12. E agora?"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="stdlib.html" title="10. Um breve passeio pela biblioteca padrão"
             accesskey="P">previous</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="../index.html">Python v2.7.2 documentation</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">O tutorial de Python</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="um-breve-passeio-pela-biblioteca-padrao-parte-ii">
<span id="tut-brieftourtwo"></span><h1>11. Um breve passeio pela biblioteca padrão &#8212; parte II<a class="headerlink" href="#um-breve-passeio-pela-biblioteca-padrao-parte-ii" title="Permalink to this headline">¶</a></h1>
<p>Este segundo passeio apresenta alguns módulos avançados que atendem
necessidades de programação profissional. Estes módulos raramente aparecem
em scripts pequenos.</p>
<div class="section" id="formatando-a-saida">
<span id="tut-output-formatting"></span><h2>11.1. Formatando a saída<a class="headerlink" href="#formatando-a-saida" title="Permalink to this headline">¶</a></h2>
<p>O módulo <a class="reference internal" href="../library/repr.html#module-repr" title="repr: Alternate repr() implementation with size limits."><tt class="xref py py-mod docutils literal"><span class="pre">repr</span></tt></a> oferece uma versão modificada da função <a class="reference internal" href="../library/repr.html#module-repr" title="repr: Alternate repr() implementation with size limits."><tt class="xref py py-func docutils literal"><span class="pre">repr()</span></tt></a> para
abreviar a exibição de coleções grandes ou profundamente aninhadas:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">repr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="o">.</span><span class="n">repr</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="s">&#39;supercalifragilisticexpialidocious&#39;</span><span class="p">))</span>
<span class="go">&quot;set([&#39;a&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;, ...])&quot;</span>
</pre></div>
</div>
<p>O módulo <a class="reference internal" href="../library/pprint.html#module-pprint" title="pprint: Data pretty printer."><tt class="xref py py-mod docutils literal"><span class="pre">pprint</span></tt></a> oferece um controle mais sofisticado na exibição tanto
de objetos embutidos quanto aqueles criados pelo usuário de maneira que fique
legível para o interpretador. Quando o resultado é maior que uma linha, o
&#8220;pretty printer&#8221; acrescenta quebras de linha e indentação para revelar as
estruturas de maneira mais clara:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="p">[[[[</span><span class="s">&#39;preto&#39;</span><span class="p">,</span> <span class="s">&#39;ciano&#39;</span><span class="p">],</span> <span class="s">&#39;branco&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;verde&#39;</span><span class="p">,</span> <span class="s">&#39;vermelho&#39;</span><span class="p">]],</span>
<span class="gp">... </span>    <span class="p">[[</span><span class="s">&#39;magenta&#39;</span><span class="p">,</span> <span class="s">&#39;amarelo&#39;</span><span class="p">],</span> <span class="s">&#39;azul&#39;</span><span class="p">]]]</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="go">[[[[&#39;preto&#39;, &#39;ciano&#39;],</span>
<span class="go">   &#39;branco&#39;,</span>
<span class="go">   [&#39;verde&#39;, &#39;vermelho&#39;]],</span>
<span class="go">  [[&#39;magenta&#39;, &#39;amarelo&#39;],</span>
<span class="go">   &#39;azul&#39;]]]</span>
</pre></div>
</div>
<p>O módulo <a class="reference internal" href="../library/textwrap.html#module-textwrap" title="textwrap: Text wrapping and filling"><tt class="xref py py-mod docutils literal"><span class="pre">textwrap</span></tt></a> formata parágrafos de texto para que caibam em uma
dada largura de tela:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">textwrap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;O método wrap() funciona como o método fill() exceto pelo fato</span>
<span class="gp">... </span><span class="s">de devolver uma lista de strings ao invés de uma única string com</span>
<span class="gp">... </span><span class="s">quebras de linha para separar as linhas.&quot;&quot;&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="go">O método wrap() funciona como o método</span>
<span class="go">fill() exceto pelo fato de devolver uma</span>
<span class="go">lista de strings ao invés de uma única</span>
<span class="go">string com quebras de linha para separar</span>
<span class="go">as linhas.</span>
</pre></div>
</div>
<p>O módulo <a class="reference internal" href="../library/locale.html#module-locale" title="locale: Internationalization services."><tt class="xref py py-mod docutils literal"><span class="pre">locale</span></tt></a> acessa uma base de dados de formatos específicos a
determinada cultura. O argumento <tt class="docutils literal"><span class="pre">grouping</span></tt> da função <a class="reference internal" href="../library/functions.html#format" title="format"><tt class="xref py py-func docutils literal"><span class="pre">format()</span></tt></a> oferece
uma forma direta de formatar números com separadores de grupo:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">locale</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_ALL</span><span class="p">,</span> <span class="s">&#39;pt_BR.utf8&#39;</span><span class="p">)</span>
<span class="go">&#39;pt_BR.utf8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conv</span> <span class="o">=</span> <span class="n">locale</span><span class="o">.</span><span class="n">localeconv</span><span class="p">()</span>          <span class="c"># pega um dicionário das convenções</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="mf">1234567.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%d</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">grouping</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&#39;1.234.567&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">locale</span><span class="o">.</span><span class="n">format_string</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s%.*f</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">conv</span><span class="p">[</span><span class="s">&#39;currency_symbol&#39;</span><span class="p">],</span>
<span class="gp">... </span>                     <span class="n">conv</span><span class="p">[</span><span class="s">&#39;frac_digits&#39;</span><span class="p">],</span> <span class="n">x</span><span class="p">),</span> <span class="n">grouping</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&#39;R$1.234.567,80&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="usando-templates">
<span id="tut-templating"></span><h2>11.2. Usando templates<a class="headerlink" href="#usando-templates" title="Permalink to this headline">¶</a></h2>
<p>O módulo <a class="reference internal" href="../library/string.html#module-string" title="string: Common string operations."><tt class="xref py py-mod docutils literal"><span class="pre">string</span></tt></a> inclui a versátil classe <tt class="xref py py-class docutils literal"><span class="pre">Template</span></tt> com uma
sintaxe simplificada, adequada para ser editada por usuários finais. Isso
permite que usuários personalizem suas aplicações sem a necessidade de alterar
a aplicação.</p>
<p>Em um template são colocadas marcações indicando o local onde o texto variável
deve ser inserido. Uma marcação é formada por <tt class="docutils literal"><span class="pre">$</span></tt> seguido de um
identificador Python válido (caracteres alfanuméricos e underscores).
Envolvendo-se o identificador da marcação entre chaves, permite que ele seja
seguido por mais caracteres alfanuméricos sem a necessidade de espaços.
Escrevendo-se <tt class="docutils literal"><span class="pre">$$</span></tt> cria-se um único <tt class="docutils literal"><span class="pre">$</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">string</span> <span class="kn">import</span> <span class="n">Template</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&#39;Os ${lugar}nos enviaram $$10 para $causa.&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">lugar</span><span class="o">=</span><span class="s">&#39;Curitiba&#39;</span><span class="p">,</span> <span class="n">causa</span><span class="o">=</span><span class="s">&#39;as obras de saneamento&#39;</span><span class="p">)</span>
<span class="go">&#39;Os Curitibanos enviaram $10 para as obras de saneamento.&#39;</span>
</pre></div>
</div>
<p>O método <tt class="xref py py-meth docutils literal"><span class="pre">substitute()</span></tt> levanta uma exceção <a class="reference internal" href="../library/exceptions.html#exceptions.KeyError" title="exceptions.KeyError"><tt class="xref py py-exc docutils literal"><span class="pre">KeyError</span></tt></a> quando o
identificador de uma marcação não é fornecido em um dicionário ou em um
argumento nomeado (<em>keyword argument</em>). Para aplicações que podem receber
dados incompletos fornecidos pelo usuário, o método <tt class="xref py py-meth docutils literal"><span class="pre">safe_substitute()</span></tt>
pode ser mais apropriado &#8212; deixará os marcadores intactos se os dados
estiverem faltando:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; t = Template('Encontre o $item e volte para $lugar.')
&gt;&gt;&gt; d = dict(item='cálice')
&gt;&gt;&gt; print t.substitute(d)
Traceback (most recent call last):
  . . .
KeyError: 'lugar'
&gt;&gt;&gt; print t.safe_substitute(d)
Encontre o cálice e volte para $lugar</pre>
</div>
<p>Subclasses de Template podem especificar um delimitador personalizado. Por
exemplo, um utilitário para renomeação em lote de fotos pode usar o sinal
de porcentagem para marcações como a data atual, número sequencial da
imagem ou formato do aquivo:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">os.path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fotos</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;img_1074.jpg&#39;</span><span class="p">,</span> <span class="s">&#39;img_1076.jpg&#39;</span><span class="p">,</span> <span class="s">&#39;img_1077.jpg&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">RenomeiaLote</span><span class="p">(</span><span class="n">Template</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">delimiter</span> <span class="o">=</span> <span class="s">&#39;%&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fmt</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&#39;Estilo para o nome (</span><span class="si">%d</span><span class="s">-data %n-numseq </span><span class="si">%f</span><span class="s">-formato):  &#39;</span><span class="p">)</span>
<span class="go">Estilo para o nome (%d-data %n-numseq %f-formato):  Ashley_%n%f</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">RenomeiaLote</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%d</span><span class="s">%b%y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nome_arquivo</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fotos</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">base</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">nome_arquivo</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">novo_nome</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">ext</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s">&#39;{0} --&gt; {1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nome_arquivo</span><span class="p">,</span> <span class="n">novo_nome</span><span class="p">)</span>

<span class="go">img_1074.jpg --&gt; Ashley_0.jpg</span>
<span class="go">img_1076.jpg --&gt; Ashley_1.jpg</span>
<span class="go">img_1077.jpg --&gt; Ashley_2.jpg</span>
</pre></div>
</div>
<p>Outra aplicação para templates é separar a lógica da aplicação dos detalhes de
múltiplos formatos de saída. Assim é possível usar templates personalizados
para gerar arquivos XML, relatórios em texto puro e relatórios web em HTML.</p>
</div>
<div class="section" id="trabalhando-com-formatos-binarios-de-dados">
<span id="tut-binary-formats"></span><h2>11.3. Trabalhando com formatos binários de dados<a class="headerlink" href="#trabalhando-com-formatos-binarios-de-dados" title="Permalink to this headline">¶</a></h2>
<p>O módulo <a class="reference internal" href="../library/struct.html#module-struct" title="struct: Interpret strings as packed binary data."><tt class="xref py py-mod docutils literal"><span class="pre">struct</span></tt></a> oferece as funções <tt class="xref py py-func docutils literal"><span class="pre">pack()</span></tt> e <tt class="xref py py-func docutils literal"><span class="pre">unpack()</span></tt> para
trabalhar com registros binários de tamanho variável. O exemplo a seguir
mostra como iterar através do cabeçalho de informação num aquivo ZIP sem usar
o módulo <a class="reference internal" href="../library/zipfile.html#module-zipfile" title="zipfile: Read and write ZIP-format archive files."><tt class="xref py py-mod docutils literal"><span class="pre">zipfile</span></tt></a>. Os códigos de empacotamento <tt class="docutils literal"><span class="pre">&quot;H&quot;</span></tt> e <tt class="docutils literal"><span class="pre">&quot;I&quot;</span></tt>
representam números sem sinal de dois e quatro bytes respectivamente. O
<tt class="docutils literal"><span class="pre">&quot;&lt;&quot;</span></tt> indica que os números têm tamanho padrão e são little-endian (bytes
menos significativos primeiro):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">struct</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;myfile.zip&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>          <span class="c"># mostra o cabeçalho dos 3 primeiros arquivos</span>
    <span class="n">start</span> <span class="o">+=</span> <span class="mi">14</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s">&#39;&lt;IIIHH&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">start</span><span class="o">+</span><span class="mi">16</span><span class="p">])</span>
    <span class="n">crc32</span><span class="p">,</span> <span class="n">comp_size</span><span class="p">,</span> <span class="n">uncomp_size</span><span class="p">,</span> <span class="n">filenamesize</span><span class="p">,</span> <span class="n">extra_size</span> <span class="o">=</span> <span class="n">fields</span>

    <span class="n">start</span> <span class="o">+=</span> <span class="mi">16</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">start</span><span class="o">+</span><span class="n">filenamesize</span><span class="p">]</span>
    <span class="n">start</span> <span class="o">+=</span> <span class="n">filenamesize</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">start</span><span class="o">+</span><span class="n">extra_size</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">filename</span><span class="p">,</span> <span class="nb">hex</span><span class="p">(</span><span class="n">crc32</span><span class="p">),</span> <span class="n">comp_size</span><span class="p">,</span> <span class="n">uncomp_size</span>

    <span class="n">start</span> <span class="o">+=</span> <span class="n">extra_size</span> <span class="o">+</span> <span class="n">comp_size</span>     <span class="c"># avança para o próximo cabeçalho</span>
</pre></div>
</div>
</div>
<div class="section" id="multi-threading">
<span id="tut-multi-threading"></span><h2>11.4. Multi-threading<a class="headerlink" href="#multi-threading" title="Permalink to this headline">¶</a></h2>
<p>O uso de threads é uma técnica para desacoplar tarefas que não são
sequencialmente dependentes. Threads podem ser usadas para melhorar o tempo de
resposta de aplicações que aceitam entradas do usuário enquanto outras tarefas
são executadas em segundo plano. Um caso relacionado é executar ações de
entrada e saída (I/O) em uma thread paralelamente a cálculos em outra thread.</p>
<p>O código a seguir mostra como o módulo de alto nível <a class="reference internal" href="../library/threading.html#module-threading" title="threading: Higher-level threading interface."><tt class="xref py py-mod docutils literal"><span class="pre">threading</span></tt></a> pode
executar tarefas em segundo plano enquanto o programa principal continua
a sua execução:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">threading</span><span class="o">,</span> <span class="nn">zipfile</span>

<span class="k">class</span> <span class="nc">AsyncZip</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">infile</span><span class="p">,</span> <span class="n">outfile</span><span class="p">):</span>
        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infile</span> <span class="o">=</span> <span class="n">infile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outfile</span> <span class="o">=</span> <span class="n">outfile</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outfile</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZIP_DEFLATED</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">infile</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&#39;Terminei de zipar em segundo plano o arquivo: &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">infile</span>

<span class="n">background</span> <span class="o">=</span> <span class="n">AsyncZip</span><span class="p">(</span><span class="s">&#39;mydata.txt&#39;</span><span class="p">,</span> <span class="s">&#39;myarchive.zip&#39;</span><span class="p">)</span>
<span class="n">background</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&#39;O programa principal continua a sua execução em primeiro plano.&#39;</span>

<span class="n">background</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>    <span class="c"># espera até que a tarefa em segundo plano termine</span>
<span class="k">print</span> <span class="s">&#39;O programa principal esperou até a tarefa em segundo plano terminar.&#39;</span>
</pre></div>
</div>
<p>O principal desafio para as aplicações que usam múltiplas threads é coordenar
as threads que compartilham dados ou outros recursos. Para esta finalidade, o
módulo threading oferece alguns mecanismos primitivos de sincronização, como
travas (locks), eventos, variáveis de condição e semáforos.</p>
<p>Apesar dessas ferramentas serem poderosas, pequenos erros de projeto podem
resultar em problemas difíceis de serem reproduzidos. Então, a maneira
preferida de coordenar tarefas é concentrar todo o acesso a determinado
recurso em uma única thread e usar o módulo <a class="reference internal" href="../library/queue.html#module-Queue" title="Queue: A synchronized queue class."><tt class="xref py py-mod docutils literal"><span class="pre">Queue</span></tt></a> para alimentar aquela
thread com requisições de outras threads. Aplicações usando objetos do tipo
<a class="reference internal" href="../library/queue.html#Queue.Queue" title="Queue.Queue"><tt class="xref py py-class docutils literal"><span class="pre">Queue.Queue</span></tt></a> para comunicação e coordenação inter-thread são mais
fáceis de implementar, mais legíveis e mais confiáveis.</p>
</div>
<div class="section" id="gerando-logs">
<span id="tut-logging"></span><h2>11.5. Gerando logs<a class="headerlink" href="#gerando-logs" title="Permalink to this headline">¶</a></h2>
<p>O módulo <a class="reference internal" href="../library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><tt class="xref py py-mod docutils literal"><span class="pre">logging</span></tt></a> oferece um completo e flexível sistema de log. Da
maneira mais simples, mensagens de log são enviadas para um arquivo ou para
<tt class="docutils literal"><span class="pre">sys.stderr</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;Informação de debug&#39;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;Mensagem informativa&#39;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&#39;Aviso:arquivo de configuração </span><span class="si">%s</span><span class="s"> não encontrado&#39;</span><span class="p">,</span>
                <span class="s">&#39;server.conf&#39;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;Um erro ocorreu&#39;</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s">&#39;Erro crítico -- encerrando o programa.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Isso produz a seguinte saída:</p>
<div class="highlight-python"><pre>WARNING:root:Aviso:arquivo de configuração server.conf não encontrado
ERROR:root:Um erro ocorreu
CRITICAL:root:Erro crítico -- encerrando o programa.</pre>
</div>
<p>Por padrão, mensagens informativas e de depuração são suprimidas e a saída é
enviada para a saída de erros padrão (stderr). Outras opções de saída incluem
envio de mensagens através de correio eletrônico, datagramas, sockets ou para
um servidor HTTP. Novos filtros podem selecionar diferentes formas de envio de
mensagens, baseadas na prioridade da mensagem: <tt class="xref py py-const docutils literal"><span class="pre">DEBUG</span></tt>, <tt class="xref py py-const docutils literal"><span class="pre">INFO</span></tt>,
<tt class="xref py py-const docutils literal"><span class="pre">WARNING</span></tt>, <tt class="xref py py-const docutils literal"><span class="pre">ERROR</span></tt> e <tt class="xref py py-const docutils literal"><span class="pre">CRITICAL</span></tt>.</p>
<p>O sistema de log pode ser configurado diretamente do Python ou pode ser
carregado a partir de um arquivo de configuração editável pelo usuário para
logs personalizados sem a necessidade de alterar a aplicação.</p>
</div>
<div class="section" id="referencias-fracas">
<span id="tut-weak-references"></span><h2>11.6. Referências fracas<a class="headerlink" href="#referencias-fracas" title="Permalink to this headline">¶</a></h2>
<p>Python faz gerenciamento automático de memória (contagem de referências para a
maioria dos objetos e <a class="reference internal" href="../glossary.html#term-garbage-collection"><em class="xref std std-term">garbage collection</em></a> [coleta
de lixo] para eliminar ciclos). A memória ocupada por um objeto é liberada
logo depois da última referência a ele ser eliminada.</p>
<p>Essa abordagem funciona bem para a maioria das aplicações, mas ocasionalmente
surge a necessidade de rastrear objetos apenas enquanto estão sendo usados por
algum outro. Infelizmente rastreá-los cria uma referência, e isso os fazem
permanentes. O módulo <a class="reference internal" href="../library/weakref.html#module-weakref" title="weakref: Support for weak references and weak dictionaries."><tt class="xref py py-mod docutils literal"><span class="pre">weakref</span></tt></a> oferece ferramentas para rastrear objetos
sem criar uma referência. Quando o objeto não é mais necessário, ele é
automaticamente removido de uma tabela de referências fracas e uma chamada
(<em>callback</em>) é disparada. Aplicações típicas incluem cacheamento de objetos
que são muito custosos para criar:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">weakref</span><span class="o">,</span> <span class="nn">gc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>                   <span class="c"># cria uma referência</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;primary&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span>            <span class="c"># não cria uma referência</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;primary&#39;</span><span class="p">]</span>                <span class="c"># pega o objeto se ele ainda estiver vivo</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">a</span>                       <span class="c"># remove a única referência</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>                <span class="c"># roda o coletor de lixo logo em seguida</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;primary&#39;</span><span class="p">]</span>                <span class="c"># A entrada foi automaticamente removida</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n-Identifier">&lt;module&gt;</span>
    <span class="n">d</span><span class="p">[</span><span class="s">&#39;primary&#39;</span><span class="p">]</span>                <span class="c"># A entrada foi automaticamente removida</span>
  File <span class="nb">&quot;C:/python26/lib/weakref.py&quot;</span>, line <span class="m">46</span>, in <span class="n-Identifier">__getitem__</span>
    <span class="n">o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]()</span>
<span class="nc">KeyError</span>: <span class="n-Identifier">&#39;primary&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="ferramentas-para-trabalhar-com-listas">
<span id="tut-list-tools"></span><h2>11.7. Ferramentas para trabalhar com listas<a class="headerlink" href="#ferramentas-para-trabalhar-com-listas" title="Permalink to this headline">¶</a></h2>
<p>Muitas necessidades envolvendo estruturas de dados podem ser satisfeitas com o
tipo embutido lista. Entretanto, algumas vezes há uma necessidade por
implementações alternativas que sacrificam algumas facilidades em nome de
melhor desempenho.</p>
<p>O módulo <a class="reference internal" href="../library/array.html#module-array" title="array: Space efficient arrays of uniformly typed numeric values."><tt class="xref py py-mod docutils literal"><span class="pre">array</span></tt></a> oferece uma classe <a class="reference internal" href="../library/array.html#module-array" title="array: Space efficient arrays of uniformly typed numeric values."><tt class="xref py py-class docutils literal"><span class="pre">array</span></tt></a>, semelhante a uma
lista, mas que armazena apenas dados homogêneos e de maneira mais compacta. O
exemplo a seguir mostra um vetor de números armazenados como números binários
de dois bytes sem sinal (código de tipo <tt class="docutils literal"><span class="pre">&quot;H&quot;</span></tt>) ao invés dos 16 bytes
usuais para cada item em uma lista de <tt class="docutils literal"><span class="pre">int</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">array</span> <span class="kn">import</span> <span class="n">array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s">&#39;H&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">4000</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">22222</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">26932</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">array(&#39;H&#39;, [10, 700])</span>
</pre></div>
</div>
<p>O módulo <a class="reference internal" href="../library/collections.html#module-collections" title="collections: High-performance datatypes"><tt class="xref py py-mod docutils literal"><span class="pre">collections</span></tt></a> oferece um objeto <tt class="xref py py-class docutils literal"><span class="pre">deque()</span></tt> que comporta-se
como uma lista mas com <em>appends</em> e <em>pops</em> pela esquerda mais rápidos, porém
mais lento ao percorrer o meio da sequência. Esses objetos são adequados para
implementar filas e buscas de amplitude em árvores de dados (<em>breadth first
tree searches</em>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="s">&quot;tarefa1&quot;</span><span class="p">,</span> <span class="s">&quot;tarefa2&quot;</span><span class="p">,</span> <span class="s">&quot;tarefa3&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;tarefa4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;Tratando&quot;</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
<span class="go">Tratando tarefa1</span>

<span class="go">nao_buscados = deque([noh_inicial])</span>
<span class="go">def busca_em_amplitude(nao_buscados):</span>
<span class="go">    noh = nao_buscados.popleft()</span>
<span class="go">    for m in gen_moves(noh):</span>
<span class="go">        if eh_objetivo(m):</span>
<span class="go">                 return m</span>
<span class="go">        nao_buscados.append(m)</span>
</pre></div>
</div>
<p>Além de implementações alternativas de listas, a biblioteca também oferece
outras ferramentas como o módulo <a class="reference internal" href="../library/bisect.html#module-bisect" title="bisect: Array bisection algorithms for binary searching."><tt class="xref py py-mod docutils literal"><span class="pre">bisect</span></tt></a> com funções para manipulação
de listas ordenadas:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">bisect</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pontos</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">100</span><span class="p">,</span> <span class="s">&#39;perl&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">&#39;tcl&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="s">&#39;lua&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="s">&#39;python&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bisect</span><span class="o">.</span><span class="n">insort</span><span class="p">(</span><span class="n">pontos</span><span class="p">,</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="s">&#39;ruby&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pontos</span>
<span class="go">[(100, &#39;perl&#39;), (200, &#39;tcl&#39;), (300, &#39;ruby&#39;), (400, &#39;lua&#39;), (500, &#39;python&#39;)]</span>
</pre></div>
</div>
<p>O módulo <a class="reference internal" href="../library/heapq.html#module-heapq" title="heapq: Heap queue algorithm (a.k.a. priority queue)."><tt class="xref py py-mod docutils literal"><span class="pre">heapq</span></tt></a> oferece funções para implementação de <em>heaps</em> baseadas
em listas normais. O valor mais baixo é sempre mantido na posição zero. Isso é
útil para aplicações que acessam repetidamente o menor elemento, mas não querem
reordenar a lista toda a cada acesso:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">heapq</span> <span class="kn">import</span> <span class="n">heapify</span><span class="p">,</span> <span class="n">heappop</span><span class="p">,</span> <span class="n">heappush</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">heapify</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>                      <span class="c"># re-arranja a lista numa ordem heap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">heappush</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">)</span>                 <span class="c"># adiciona um novo item</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">heappop</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>  <span class="c"># recupera os três menores itens</span>
<span class="go">[-5, 0, 1]</span>
</pre></div>
</div>
</div>
<div class="section" id="aritmetica-decimal-com-ponto-flutuante">
<span id="tut-decimal-fp"></span><h2>11.8. Aritmética decimal com ponto flutuante<a class="headerlink" href="#aritmetica-decimal-com-ponto-flutuante" title="Permalink to this headline">¶</a></h2>
<p>O módulo <a class="reference internal" href="../library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><tt class="xref py py-mod docutils literal"><span class="pre">decimal</span></tt></a> oferece o tipo <tt class="xref py py-class docutils literal"><span class="pre">Decimal</span></tt> para aritmética
decimal com ponto flutuante. Comparado a implementação embutida <a class="reference internal" href="../library/functions.html#float" title="float"><tt class="xref py py-class docutils literal"><span class="pre">float</span></tt></a>
que usa aritmética binária de ponto flutuante, a classe é especialmente útil
para:</p>
<ul class="simple">
<li>aplicações financeiras que requerem representação decimal exata,</li>
<li>controle sobre a precisão,</li>
<li>controle sobre arredondamento para satisfazer requisitos legais,</li>
<li>rastreamento de casas decimais significativas, ou</li>
<li>aplicações onde o usuário espera que os resultados sejam os mesmos que os
dos cálculos feitos à mão.</li>
</ul>
<p>Por exemplo, calcular um imposto de 5% sobre uma chamada telefônica de 70
centavos devolve diferentes resultados com aritmética de ponto flutuante
decimal ou binária. A diferença torna-se significativa se os resultados são
arredondados para o centavo mais próximo.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;0.70&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;1.05&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">Decimal(&#39;0.7350&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">quantize</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;0.01&#39;</span><span class="p">))</span>  <span class="c"># arredonda para o centavo mais próximo</span>
<span class="go">Decimal(&#39;0.74&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="o">.</span><span class="mi">70</span> <span class="o">*</span> <span class="mf">1.05</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>         <span class="c"># o mesmo cálculo com float</span>
<span class="go">0.73</span>
</pre></div>
</div>
<p>O resultado de <tt class="xref py py-class docutils literal"><span class="pre">Decimal</span></tt> considera zeros à direita, automaticamente
inferindo quatro casas decimais a partir de multiplicandos com duas casas
decimais. O módulo <a class="reference internal" href="../library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><tt class="xref py py-mod docutils literal"><span class="pre">decimal</span></tt></a> reproduz a aritmética como fazemos à mão e
evita problemas que podem ocorrer quando a representação binária do ponto
flutuante não consegue representar quantidades decimais com exatidão.</p>
<p>A representação exata permite à classe <tt class="xref py py-class docutils literal"><span class="pre">Decimal</span></tt> executar cálculos de
módulo e testes de igualdade que não funcionam bem em ponto flutuante
binário:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;1.00&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;.10&#39;</span><span class="p">)</span>
<span class="go">Decimal(&#39;0.00&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mf">1.00</span> <span class="o">%</span> <span class="mf">0.10</span>
<span class="go">0.09999999999999995</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">([</span><span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;0.1&#39;</span><span class="p">)]</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s">&#39;1.0&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">([</span><span class="mf">0.1</span><span class="p">]</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span> <span class="o">==</span> <span class="mf">1.0</span>
<span class="go">False</span>
</pre></div>
</div>
<p>O módulo <a class="reference internal" href="../library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><tt class="xref py py-mod docutils literal"><span class="pre">decimal</span></tt></a> implementa a aritmética com tanta precisão quanto
necessária:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">getcontext</span><span class="p">()</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="mi">36</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Decimal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="go">Decimal(&#39;0.142857142857142857142857142857142857&#39;)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">11. Um breve passeio pela biblioteca padrão &#8212; parte II</a><ul>
<li><a class="reference internal" href="#formatando-a-saida">11.1. Formatando a saída</a></li>
<li><a class="reference internal" href="#usando-templates">11.2. Usando templates</a></li>
<li><a class="reference internal" href="#trabalhando-com-formatos-binarios-de-dados">11.3. Trabalhando com formatos binários de dados</a></li>
<li><a class="reference internal" href="#multi-threading">11.4. Multi-threading</a></li>
<li><a class="reference internal" href="#gerando-logs">11.5. Gerando logs</a></li>
<li><a class="reference internal" href="#referencias-fracas">11.6. Referências fracas</a></li>
<li><a class="reference internal" href="#ferramentas-para-trabalhar-com-listas">11.7. Ferramentas para trabalhar com listas</a></li>
<li><a class="reference internal" href="#aritmetica-decimal-com-ponto-flutuante">11.8. Aritmética decimal com ponto flutuante</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="stdlib.html"
                        title="previous chapter">10. Um breve passeio pela biblioteca padrão</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="whatnow.html"
                        title="next chapter">12. E agora?</a></p>
<h3>This Page</h3>
<ul class="this-page-menu">
  <li><a href="../bugs.html">Report a Bug</a></li>
  <li><a href="../_sources/tutorial/stdlib2.txt"
         rel="nofollow">Show Source</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="whatnow.html" title="12. E agora?"
             >next</a> |</li>
        <li class="right" >
          <a href="stdlib.html" title="10. Um breve passeio pela biblioteca padrão"
             >previous</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="../index.html">Python v2.7.2 documentation</a> &raquo;</li>

          <li><a href="index.html" >O tutorial de Python</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 1990-2012, Python Software Foundation.
    <br />
    The Python Software Foundation is a non-profit corporation.  
    <a href="http://www.python.org/psf/donations/">Please donate.</a>
    <br />
    Last updated on Apr 03, 2012.
    <a href="../bugs.html">Found a bug</a>?
    <br />
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>

  </body>
</html>